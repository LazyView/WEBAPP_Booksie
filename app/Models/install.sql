-- MySQL Script generated by MySQL Workbench
-- Fri Dec 20 00:56:11 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema knihovna
-- -----------------------------------------------------
-- 
-- 

-- -----------------------------------------------------
-- Table `uzivatel_pravo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `uzivatel_pravo` ;

CREATE TABLE IF NOT EXISTS `uzivatel_pravo` (
  `id_pravo` INT NOT NULL AUTO_INCREMENT,
  `nazev` VARCHAR(45) NOT NULL,
  `vaha` INT NOT NULL,
  PRIMARY KEY (`id_pravo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `uzivatel`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `uzivatel` ;

CREATE TABLE IF NOT EXISTS `uzivatel` (
  `id_uzivatel` INT NOT NULL AUTO_INCREMENT,
  `id_pravo` INT NOT NULL,
  `jmeno` VARCHAR(60) NOT NULL,
  `heslo` VARCHAR(60) NOT NULL,
  `email` VARCHAR(35) NOT NULL,
  `cislo_popisne` INT NULL DEFAULT NULL,
  `mesto` VARCHAR(45) NULL DEFAULT NULL,
  `psc` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id_uzivatel`),
  INDEX `fk_uzivatele_pravo_id_pravo_idx` (`id_pravo` ASC),
  CONSTRAINT `fk_uzivatel_pravo_id_pravo`
    FOREIGN KEY (`id_pravo`)
    REFERENCES `uzivatel_pravo` (`id_pravo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `autor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `autor` ;

CREATE TABLE IF NOT EXISTS `autor` (
  `id_autor` INT NOT NULL AUTO_INCREMENT,
  `jmeno` VARCHAR(45) NOT NULL,
  `prijmeni` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_autor`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `zanr`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `zanr` ;

CREATE TABLE IF NOT EXISTS `zanr` (
  `id_zanr` INT NOT NULL AUTO_INCREMENT,
  `nazev` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_zanr`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kniha`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `kniha` ;

CREATE TABLE IF NOT EXISTS `kniha` (
  `id_kniha` INT NOT NULL AUTO_INCREMENT,
  `nazev` VARCHAR(45) NOT NULL,
  `fk_autor` INT NOT NULL,
  `rok_vydani` INT NULL DEFAULT NULL,
  `ISBN` VARCHAR(45) NOT NULL,
  `pocet_stran` INT NULL DEFAULT NULL,
  `fk_zanr` INT NOT NULL,
  `popis` VARCHAR(150) NULL DEFAULT NULL,
  `logo` VARCHAR(255) NULL DEFAULT NULL,
  INDEX `fk_autor_id_autor_idx` (`fk_autor` ASC),
  INDEX `fk_zanr_id_zanr_idx` (`fk_zanr` ASC),
  PRIMARY KEY (`id_kniha`),
  CONSTRAINT `fk_autor_id_autor`
    FOREIGN KEY (`fk_autor`)
    REFERENCES `autor` (`id_autor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_zanr_id_zanr`
    FOREIGN KEY (`fk_zanr`)
    REFERENCES `zanr` (`id_zanr`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `uzivatel_pravo`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `uzivatel_pravo` (`id_pravo`, `nazev`, `vaha`) VALUES (1, 'SuperAdmin', 20);
INSERT INTO `uzivatel_pravo` (`id_pravo`, `nazev`, `vaha`) VALUES (2, 'Admin', 10);
INSERT INTO `uzivatel_pravo` (`id_pravo`, `nazev`, `vaha`) VALUES (3, 'Autor', 5);
INSERT INTO `uzivatel_pravo` (`id_pravo`, `nazev`, `vaha`) VALUES (4, 'Ctenar', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `uzivatel`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `uzivatel` (`id_uzivatel`, `id_pravo`, `jmeno`, `heslo`, `email`, `cislo_popisne`, `mesto`, `psc`) VALUES (1, 1, 'SuperAdmin', '$2y$10$J55swKa8ZaiMVn7eP7d81OIFk5R3S8uBQxB2zvwY04DyDtxxQ.FeK', 'superadmin@ss.cz', NULL, NULL, NULL);
INSERT INTO `uzivatel` (`id_uzivatel`, `id_pravo`, `jmeno`, `heslo`, `email`, `cislo_popisne`, `mesto`, `psc`) VALUES (2, 2, 'admin', '$2y$10$.YdP8nyQJmnoByy/f2enIeEVOqpHV68gsAiyl4HQaCoTL2Rb5QRtu', 'superadmin@ss.cz', NULL, NULL, NULL);
INSERT INTO `uzivatel` (`id_uzivatel`, `id_pravo`, `jmeno`, `heslo`, `email`, `cislo_popisne`, `mesto`, `psc`) VALUES (3, 3, 'autor', '$2y$10$.YdP8nyQJmnoByy/f2enIeEVOqpHV68gsAiyl4HQaCoTL2Rb5QRtu', 'superadmin@ss.cz', NULL, NULL, NULL);
INSERT INTO `uzivatel` (`id_uzivatel`, `id_pravo`, `jmeno`, `heslo`, `email`, `cislo_popisne`, `mesto`, `psc`) VALUES (4, 4, 'Petra Ječmenak', '$2y$10$f9AWLCzN6ihRAFKQhfWGS.O86qSqLCwK.Oa4WiettXdSsDsRnksEa', 'superadmin@ss.cz', NULL, NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `autor`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `autor` (`id_autor`, `jmeno`, `prijmeni`) VALUES
                                                          (2, 'Stephen', 'King'),
                                                          (3, 'J.R.R.', 'Tolkien'),
                                                          (4, 'George R.R.', 'Martin'),
                                                          (5, 'Agatha', 'Christie'),
                                                          (6, 'Dan', 'Brown'),
                                                          (7, 'Jules', 'Verne'),
                                                          (8, 'H.P.', 'Lovecraft');

COMMIT;


-- -----------------------------------------------------
-- Data for table `zanr`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (1, 'Bajka');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (2, 'Román');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (3, 'Thriller');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (4, 'Bajka');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (5, 'Fantasy');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (6, 'Horor');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (7, 'Poezie');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (8, 'Cestopis');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (9, 'SCI-FI');
INSERT INTO `zanr` (`id_zanr`, `nazev`) VALUES (10, 'Detektivka');

COMMIT;


-- -----------------------------------------------------
-- Data for table `kniha`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `kniha` (`nazev`, `fk_autor`, `rok_vydani`, `ISBN`, `pocet_stran`, `fk_zanr`, `popis`, `logo`) VALUES
                                                                                                               ('Osvícení', 2, 1977, '978-0307743657', 447, 6, 'Strašidelný příběh o rodině izolované v zimě v strašidelném hotelu', 'public/uploads/books/osviceni.jpeg'),
                                                                                                               ('Společenstvo prstenu', 3, 1954, '978-0547928210', 423, 5, 'První část epické fantasy trilogie sledující Frodovu cestu', 'public/uploads/books/spolecenstvo.jpeg'),
                                                                                                               ('Vražda v Orient Expressu', 5, 1934, '978-0062073501', 274, 10, 'Detektiv Poirot vyšetřuje vraždu na uvízlém vlaku', 'public/uploads/books/vrazda_v_orient.jpeg'),
                                                                                                               ('Šifra mistra Leonarda', 6, 2003, '978-0307474278', 454, 3, 'Napínavá honba za odhalením náboženských záhad v moderní Evropě', 'public/uploads/books/Sifra_mistra.jpeg'),
                                                                                                               ('Dvacet tisíc mil pod mořem', 7, 1870, '978-1503280786', 378, 9, 'Podmořské dobrodružství na palubě ponorky Nautilus', 'public/uploads/books/dvacet_tisic.jpeg'),
                                                                                                               ('V horách šílenství', 8, 1936, '978-1503380387', 186, 6, 'Mrazivá expedice objevuje prastaré hrůzy v Antarktidě', 'public/uploads/books/V_horach.jpeg'),
                                                                                                               ('Svědectví', 2, 1978, '978-0307743688', 823, 9, 'Postapokalyptický boj mezi dobrem a zlem', 'public/uploads/books/Svedectvi.jpeg'),
                                                                                                               ('Silmarillion', 3, 1977, '978-0544338012', 365, 5, 'Mythologický základ Středozemě', 'public/uploads/books/silmarillion.jpeg'),
                                                                                                               ('A nezbyl ani jeden', 5, 1939, '978-0062073488', 264, 10, 'Deset cizinců uvězněných na ostrově čelí tajemnému vrahovi', 'public/uploads/books/a_nezbyl_ani_jeden.jpeg');
COMMIT;